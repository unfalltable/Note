---
title: OSS
categories: Java中间件
tags: [中间件]
---

# MinIO

## 简介

- 是一个对象存储服务，存储非结构化存储，GoLang写的
- Bucket
  - Object

## 断点续传

- 本质上就是分块上传，主要区别在于粒度的划分
- minio默认的合并分块时最小得是5m，小于这个值的话会报错
- 合并分块后一般需要校验是否完整，可以使用 md5 实现
- 具体流程
  - 前端在上传分块之前先检查该文件在minio上是否存在
    - 传一个待上传文件的md5值，后端在数据库和minio中查询是否存在即可
    - 有可能出现数据库有minio没有，也要上传
  - 开始上传分块，需要先判断分块是否存在
    - 传一个待上传分块的md5值和分块的序号（一般就是分块的文件名），后端在minio中查询是否存在即可
  - 上传分块
    - 使用md5的前两位作为minio上文件的存储目录
    - 使用md5值作为文件名
  - 合并分块 